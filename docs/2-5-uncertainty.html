<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>climate-econ - 2.5 – what don’t we know about climate change?</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">climate-econ</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html" rel="" target="">
 <span class="menu-text">home</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-part-one" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">part one</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-part-one">    
        <li>
    <a class="dropdown-item" href="./1-1-what-is-climate-change.html" rel="" target="">
 <span class="dropdown-text">1.1 – what is climate change?</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./1-2-climate-and-economy.html" rel="" target="">
 <span class="dropdown-text">1.2 – how are the climate and economy linked?</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./1-3-climate-economics.html" rel="" target="">
 <span class="dropdown-text">1.3 – why is climate change an economic problem?</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./1-4-costs-benefits.html" rel="" target="">
 <span class="dropdown-text">1.4 – how do we measure the costs and benefits of climate change?</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./1-5-discounting.html" rel="" target="">
 <span class="dropdown-text">1.5 – should i care about my grandchildren’s future?</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./1-6-climate-damages.html" rel="" target="">
 <span class="dropdown-text">1.6 – can we put a price on climate impacts?</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./1-7-climate-burdens.html" rel="" target="">
 <span class="dropdown-text">1.7 – who bears the burden of climate impacts?</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-part-two" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">part two</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-part-two">    
        <li>
    <a class="dropdown-item" href="./2-1-econ-climate-solutions.html" rel="" target="">
 <span class="dropdown-text">2.1 – how would an economist solve climate change?</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./2-2-climate-adaptation.html" rel="" target="">
 <span class="dropdown-text">2.2 – can’t we just live with climate change?</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./2-3-distributional-effects.html" rel="" target="">
 <span class="dropdown-text">2.3 – who pays for climate policy?</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./2-4-behavior.html" rel="" target="">
 <span class="dropdown-text">2.4 – does behavior undermine climate policy?</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./2-5-uncertainty.html" rel="" target="">
 <span class="dropdown-text">2.5 – what don’t we know about climate change?</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./2-6-international-cooperation.html" rel="" target="">
 <span class="dropdown-text">2.6 – can we address climate change on our own?</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./2-7-geoengineering.html" rel="" target="">
 <span class="dropdown-text">2.7 – can we fix climate change with this one weird trick?</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./2-8-individual-behavior.html" rel="" target="">
 <span class="dropdown-text">2.8 – is changing our own behavior the solution?</span></a>
  </li>  
    </ul>
  </li>
</ul>
            <div class="quarto-navbar-tools ms-auto">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#note-development-in-progress" id="toc-note-development-in-progress" class="nav-link active" data-scroll-target="#note-development-in-progress"><span style="color:red;"><em>Note: development in progress…</em></span></a></li>
  <li><a href="#overview" id="toc-overview" class="nav-link" data-scroll-target="#overview">overview</a></li>
  <li><a href="#risk-aversion" id="toc-risk-aversion" class="nav-link" data-scroll-target="#risk-aversion">risk aversion</a></li>
  <li><a href="#the-precautionary-principle" id="toc-the-precautionary-principle" class="nav-link" data-scroll-target="#the-precautionary-principle">the precautionary principle</a></li>
  <li><a href="#risk-management-and-climate-change" id="toc-risk-management-and-climate-change" class="nav-link" data-scroll-target="#risk-management-and-climate-change">risk management and climate change</a></li>
  <li><a href="#fat-tails" id="toc-fat-tails" class="nav-link" data-scroll-target="#fat-tails">fat tails</a></li>
  <li><a href="#weitzmans-dismal-theorem" id="toc-weitzmans-dismal-theorem" class="nav-link" data-scroll-target="#weitzmans-dismal-theorem">Weitzman’s “dismal theorem”</a></li>
  <li><a href="#tipping-points" id="toc-tipping-points" class="nav-link" data-scroll-target="#tipping-points">tipping points</a></li>
  <li><a href="#resources-and-further-reading" id="toc-resources-and-further-reading" class="nav-link" data-scroll-target="#resources-and-further-reading">resources and further reading</a></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">references</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">2.5 – what don’t we know about climate change?</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="note-development-in-progress" class="level1">
<h1><span style="color:red;"><em>Note: development in progress…</em></span></h1>
</section>
<section id="overview" class="level1">
<h1>overview</h1>
<p>There a three major challenges to choosing the correct price on CO2 emissions:</p>
<ol type="1">
<li>What is the correct discount rate?</li>
<li>How to measure damages from CO2 emissions?</li>
<li>How to account for uncertainty in climate change?</li>
</ol>
<p>Specifically, how should we incorporate low-probability, high damage scenarios into our measures of the economic consequences of climate change and our policy decisions?</p>
</section>
<section id="risk-aversion" class="level1">
<h1>risk aversion</h1>
<p>As a society, we are generally <strong>risk averse</strong>, which means we need to be compensated (via a <em>“risk premium”</em>) to be indifferent between taking a gamble and accepting a “sure thing.” In other words: with risk-aversion, we would be willing-to-pay for a climate risk reduction.</p>
<ul>
<li>Risk-aversion can lead to a larger estimate of the SCC because of potential climate catastrophes</li>
<li>Also provides justification for incorporating the value of reducing uncertainty into climate policy decisions.</li>
</ul>
</section>
<section id="the-precautionary-principle" class="level1">
<h1>the precautionary principle</h1>
<p>The <strong>precautionary principle</strong> states: “Where there are threats of serious or irreversible damage, lack of full scientific certainty shall not be used as a reason for postponing cost- effective measures to prevent environmental degradation.”</p>
<ul>
<li>Adopted by the UN Framework Convention on Climate Change (UNFCCC).</li>
<li>Uncertainty about climate damages does not serve as an argument to delay action</li>
<li>In the face of great uncertainty, a precautionary approach might even result in more stringent emissions-reductions targets or adaptational responses.</li>
<li>Mitigation and adaptation measures should be implemented before full information is available and uncertainties regarding the scope and timing of climate change are resolved.</li>
</ul>
<p>The precautionary principle is inconsistent with standard benefit-cost analysis. Basic idea: it’s better to be safe than sorry, but how safe is safe enough?</p>
</section>
<section id="risk-management-and-climate-change" class="level1">
<h1>risk management and climate change</h1>
<ul>
<li><p>If climate damages are small, but will be worse when economy is strong <span class="math inline">\(\implies\)</span> discount rates should be higher (because climate change will be “easier” to live with)</p></li>
<li><p>If climate damages are large and correlated with economic downturns <span class="math inline">\(\implies\)</span> discount rates should be low</p></li>
<li><p>If there is a 5-10% chance of a climate catastrophe that crashes economies and alters life as we know it? <span class="math inline">\(\implies\)</span> lower discount rates to avoid financial collapse.</p>
<ul>
<li>What would we be willing to pay to avoid a 2008 financial crisis? The COVID pandemic?</li>
</ul></li>
<li><p>Investors need to be paid to take on more risk (i.e., to make them willing to buy a risky asset rather than a low-risk bond). If climate poses potentially catastrophic risk, then the “low-risk bond” of avoiding that risk is mitigating carbon emissions now.</p>
<ul>
<li>This thinking can lead to very small or even negative discount rates.</li>
</ul></li>
<li><p>Mitigating GHGs is like buying insurance against a catastrophic event.</p></li>
</ul>
</section>
<section id="fat-tails" class="level1">
<h1>fat tails</h1>
<p>Recall that equilibrium climate sensitivity (ECS) is the change in global mean surface temperature that would result from a doubling of atmospheric <span class="math inline">\(CO_2\)</span> concentrations. ECS is a key parameter in climate models. Pre-industrial levels of CO2 concentrations were roughly 280 ppm. Current levels are around 420 ppm. So, we are roughly halfway to a doubling of CO2 concentrations. If GHG emissions continue on their current trajectory, we will reach a doubling of CO2 concentrations by roughly 2050. ECS is useful because it tells us how global mean surface temperature will change in response to GHG concentrations in the atmosphere.</p>
<p>Regarding ECS, IPCC AR6 states: “Improved knowledge of climate processes, paleoclimate evidence and the response of the climate system to increasing radiative forcing gives a best estimate of equilibrium climate sensitivity of 3°C with a narrower range compared to AR5.” And, “…the very likely range of equilibrium climate sensitivity is between 2°C (high confidence) and 5°C (medium confidence).”</p>
<p>In IPCC parlance, “very likely” means 90-100% likelhood. So, the IPCC is saying that there is a 90% probability that climate sensitivity is between 2°C and 5°C. But, there is up to a 10% chance that climate sensitivity is greater than 5°C. This is a <strong>fat tail</strong>. A fat tail is a probability distribution that has a higher probability of extreme events than a normal distribution. The ECS distribution is fat-tailed because the likelihood of a very high ECS is greater than a normal distribution would predict. In <a href="#fig-ecs">Figure&nbsp;1</a>, which shows estimates of the ECS distribution from various studies, the probability of exceeding 5°C is roughly 10% (which is represented by the “thickness” of the right tail of the distribution).</p>
<div id="fig-ecs" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="./images/ecs.png" class="img-fluid figure-img" style="width:80.0%"></p>
<figcaption class="figure-caption">Figure&nbsp;1: Equilibrium climate sensitivity</figcaption>
</figure>
</div>
<p>Of course, the IPCC’s best guess is that ECS will be roughly 3°C. But, there is a non-trivial chance that ECS will be much higher than 3°C. This fat tail is concerning because we really don’t know what the economic consequences of global climate change on such a scale might be. The consequences could be catastrophic. The likelihood of getting into a car accident or having your home burn down is low—lower than 10% each year—but we are required to take out insurance policies against these low-probability, high-cost events.</p>
<p>In their book <em>Climate Shock</em>, Wagner and Weitzman summarize this point nicely (although their quote is based on slightly out-of-date numbers): <em>“We don’t know the full implications of an eventual 6°C (11°F) temperature change. We can’t know. It’s a blind planetary gamble. Devastating home fires, car crashes, and other personal catastrophes are almost always much less likely than 10 percent. And still, people take out insurance to cover against these remote possibilities, or are even required to do so by laws that hope to avoid pushing these costs onto society. Risks like this on a planetary scale should not—must not—be pushed onto society.”</em></p>
<p>If the distribution of damages from a given level of warming has a “fat tail” (damages don’t go to zero probability fast enough), the optimal policy prescription may change dramatically.</p>
</section>
<section id="weitzmans-dismal-theorem" class="level1">
<h1>Weitzman’s “dismal theorem”</h1>
<p>As a result of fat tails, Weitzman (2009) argues that the expected value of climate damages is infinite. This is because the expected value of climate damages is the sum of the probability of each level of climate damages multiplied by the level of climate damages. If there is a non-zero probability of catastrophic climate damages (e.g., that could dramatically affect the global economy and generate substantial loss of human life), then the expected value of climate marginal damages could be infinite. This is Weitzman’s “dismal theorem.” In other words, if the probability of catastrophic climate damages is non-zero, then the SCC—that is, the marginal benefit of reducing one ton of GHG emissions—would be infinite. This is clearly an absurd result. But, it is a consequence of fat tailed climate risk.</p>
<p>The dismal theorem is effectively the precautionary principle in action: When a potentially serious risk exists, but significant scientific uncertainty also exists, action should not wait until all uncertainty is resolved.</p>
</section>
<section id="tipping-points" class="level1">
<h1>tipping points</h1>
<p>A <strong>tipping point</strong> is a threshold (point) that, when exceeded, can lead to large, abrupt, and discontinuous shifts in the state of the system. Tipping points are often characterized by a <strong>hysteresis response</strong>, which states that a system does not return to its original state after forcing is removed. In other words, going past a tipping point results in a new, irreversible equilibrium.</p>
<p>Here are a few key examples of tipping points:</p>
<ul>
<li><em>Ocean methane hydrates</em> — solid formations of methane deep in the ocean (solid because of cold &amp; pressure). As oceans become warmer, methane hydrates can destabilize, releasing methane into the atmosphere and ocean (leading to acidification).</li>
<li><em>Permafrost carbon feedbacks</em> — as permafrost thaws around the arctic and other cold-climates, carbon dioxide and methane are released.</li>
<li><em>Arctic sea ice / Surface Albedo Feedback</em> — Sea ice reflects solar radiation (because it’s bright, this is the albedo effect). As sea ice melts, the earth (particularly around the poles) warms more quickly.</li>
<li><em>Amazon dieback</em> – loss in rain forest biomass due to deforestation and climate change. Leads to release in stored carbon, no longer a carbon sink, and biodiversity loss.</li>
<li><em>Greenland and West Antarctic Ice Sheet disintegration</em> — Melting of ice sheets leads to sea-level rise (SLR)</li>
<li><em>Atlantic Meridional Overturning Circulation (AMOC) slowdown</em> — changing density of water slows down Gulf Stream circulates warm water north and cold water south — generates weather patterns in Europe and SLR in US.</li>
<li><em>Indian summer monsoon variability</em> — decrease in frequency of Indian monsoon, directly affects economic outcomes in South Asia (particularly in agriculture)</li>
</ul>
<p>Many changes in climate are irreversible even if we stop emitting GHGs today. Although, the worst case scenarios can still be avoided by reducing GHG emissions.</p>
</section>
<section id="resources-and-further-reading" class="level1">
<h1>resources and further reading</h1>
</section>
<section id="references" class="level1">
<h1>references</h1>
<div id="refs" role="list">

</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>