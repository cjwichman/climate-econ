<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>climate-econ - 1.1 – what is climate change?</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">climate-econ</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html" rel="" target="">
 <span class="menu-text">home</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-part-one" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">part one</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-part-one">    
        <li>
    <a class="dropdown-item" href="./1-1-what-is-climate-change.html" rel="" target="">
 <span class="dropdown-text">1.1 – what is climate change?</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./1-2-climate-and-economy.html" rel="" target="">
 <span class="dropdown-text">1.2 – how are the climate and economy linked?</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./1-3-climate-economics.html" rel="" target="">
 <span class="dropdown-text">1.3 – why is climate change an economic problem?</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./1-4-costs-benefits.html" rel="" target="">
 <span class="dropdown-text">1.4 – how do we measure the costs and benefits of climate change?</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./1-5-discounting.html" rel="" target="">
 <span class="dropdown-text">1.5 – should i care about my grandchildren’s future?</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./1-6-climate-damages.html" rel="" target="">
 <span class="dropdown-text">1.6 – can we put a price on climate impacts?</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./1-7-climate-burdens.html" rel="" target="">
 <span class="dropdown-text">1.7 – who bears the burden of climate impacts?</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-part-two" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">part two</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-part-two">    
        <li>
    <a class="dropdown-item" href="./2-1-econ-climate-solutions.html" rel="" target="">
 <span class="dropdown-text">2.1 – how would an economist solve climate change?</span></a>
  </li>  
    </ul>
  </li>
</ul>
            <div class="quarto-navbar-tools ms-auto">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#the-carbon-cycle" id="toc-the-carbon-cycle" class="nav-link active" data-scroll-target="#the-carbon-cycle">the carbon cycle</a></li>
  <li><a href="#the-greenhouse-effect" id="toc-the-greenhouse-effect" class="nav-link" data-scroll-target="#the-greenhouse-effect">the greenhouse effect</a></li>
  <li><a href="#the-intergovernmental-panel-on-climate-change-ipcc" id="toc-the-intergovernmental-panel-on-climate-change-ipcc" class="nav-link" data-scroll-target="#the-intergovernmental-panel-on-climate-change-ipcc">the Intergovernmental Panel on Climate Change (IPCC)</a></li>
  <li><a href="#attribution-of-warming-to-human-activity" id="toc-attribution-of-warming-to-human-activity" class="nav-link" data-scroll-target="#attribution-of-warming-to-human-activity">attribution of warming to human activity</a></li>
  <li><a href="#equilibrium-climate-sensitivity" id="toc-equilibrium-climate-sensitivity" class="nav-link" data-scroll-target="#equilibrium-climate-sensitivity">equilibrium climate sensitivity</a></li>
  <li><a href="#timing" id="toc-timing" class="nav-link" data-scroll-target="#timing">timing</a></li>
  <li><a href="#climate-vs.-weather" id="toc-climate-vs.-weather" class="nav-link" data-scroll-target="#climate-vs.-weather">climate vs.&nbsp;weather</a></li>
  <li><a href="#resources-and-further-reading" id="toc-resources-and-further-reading" class="nav-link" data-scroll-target="#resources-and-further-reading">resources and further reading</a></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">references</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">1.1 – what is climate change?</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<!-- ## key concepts
* The carbon cycle
* The greenhouse effect
* Intergovernmental Panel on Climate Change (IPCC)
* Attribution of warming to human activity
* Equilibrium climate sensitivity
* Climate vs. weather -->
<section id="the-carbon-cycle" class="level2">
<h2 class="anchored" data-anchor-id="the-carbon-cycle">the carbon cycle</h2>
<p>Really old plants and organic material decompose, creating fossil fuels (i.e., natural gas, oil, coal). When we burn fossil fuels, we release those carbon molecules as carbon dioxide (CO2) into the atmosphere. This disrupts the natural carbon cycle, which is the process by which carbon is exchanged between the atmosphere, oceans, and land.</p>
<!-- -
 ![The carbon cycle](https://www.researchgate.net/publication/343185753/figure/fig2/AS:916806327877635@1595595070933/The-Carbon-Cycle-Source-Alamy-2020-The-Carbon-Cycle-8.png) 
- -->
</section>
<section id="the-greenhouse-effect" class="level2">
<h2 class="anchored" data-anchor-id="the-greenhouse-effect">the greenhouse effect</h2>
<p>The greenhouse effect is the process by which the Earth’s atmosphere traps heat. The greenhouse effect is a natural process that keeps the Earth’s surface warm enough to support life. Without the greenhouse effect, the Earth’s surface would be about 30 degrees Celsius cooler.</p>
<p>As we release more greenhouse gases into the atmosphere, the greenhouse effect becomes stronger by increasing the amount of solar energy that gets trapped in the atmosphere. This leads to global warming, which is the increase in the Earth’s average surface temperature. The main greenhouse gases are carbon dioxide (<span class="math inline">\(CO_2\)</span>), methane (<span class="math inline">\(CH_4\)</span>), and nitrous oxide (<span class="math inline">\(N_2O\)</span>).</p>
</section>
<section id="the-intergovernmental-panel-on-climate-change-ipcc" class="level2">
<h2 class="anchored" data-anchor-id="the-intergovernmental-panel-on-climate-change-ipcc">the Intergovernmental Panel on Climate Change (IPCC)</h2>
<p>The Intergovernmental Panel on Climate Change (IPCC) is the United Nations body for assessing the science related to climate change. The IPCC was established in 1988 by the World Meteorological Organization (WMO) and the United Nations Environment Programme (UNEP). The IPCC is responsible for providing policymakers with regular assessments of the scientific basis of climate change, its impacts and future risks, and options for adaptation and mitigation. The IPCC does not conduct its own research, but rather reviews and synthesizes existing research. The IPCC’s most recent assessment report, the Sixth Assessment Report (AR6), was released in August 2021.</p>
</section>
<section id="attribution-of-warming-to-human-activity" class="level2">
<h2 class="anchored" data-anchor-id="attribution-of-warming-to-human-activity">attribution of warming to human activity</h2>
<p>AR6 of the IPCC included the following statement about the role of human influence on climate change: <em>“It is unequivocal that human influence has warmed the atmosphere, ocean and land. Widespread and rapid changes in the atmosphere, ocean, cryosphere and biosphere have occurred.”</em> This statement is the strongest statement the IPCC has made to date about the role of human activity in climate change.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://www.ipcc.ch/report/ar6/wg1/downloads/figures/IPCC_AR6_WGI_SPM_Figure_1.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Attribution of warming to human activity. <em>Source:</em> IPCC (AR6), <a href="https://www.ipcc.ch/report/ar6/wg1/downloads/figures/IPCC_AR6_WGI_SPM_Figure_1.png">[link].</a></figcaption>
</figure>
</div>
<p>It is interesting to note how the IPCC’s statements on the attribution of climate change to human activity have evolved over time. <span class="citation" data-cites="hsiang2018economist">Hsiang and Kopp (<a href="#ref-hsiang2018economist" role="doc-biblioref">2018</a>, Table 2)</span> provide the table below that captures the evolving language used by the IPCC in its assessment reports, beginning with AR1 in 1990.</p>
<div id="fig-evolution-attribution" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="./images/hsiang_kopp_attribution.png" class="img-fluid figure-img" style="width:100.0%"></p>
<figcaption class="figure-caption">Figure&nbsp;1: Evolution of IPCC statements on human influence on climate change. <em>Source:</em> <span class="citation" data-cites="hsiang2018economist">Hsiang and Kopp (<a href="#ref-hsiang2018economist" role="doc-biblioref">2018</a>)</span>, Table 2.</figcaption>
</figure>
</div>
</section>
<section id="equilibrium-climate-sensitivity" class="level2">
<h2 class="anchored" data-anchor-id="equilibrium-climate-sensitivity">equilibrium climate sensitivity</h2>
<p>Equilibrium climate sensitivity (or ECS) is the change in global mean surface temperature following a doubling of atmospheric CO2 concentration. It is a measure of the climate system’s response to a change in radiative forcing. ECS is useful for understanding how increases in CO2 in the atmosphere result in changes in surface temperature changes. In IPCC AR6, ECS is estimated to be in the <em>likely</em> range of 2.5–4.0 and <em>very likely</em> range of 2.0–5.0 degrees Celsius, with a best estimate of 3.0 degrees Celsius.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://www.ipcc.ch/report/ar6/wg1/downloads/figures/IPCC_AR6_WGI_FAQ_7_3_Figure_1.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Equilibrium climate sensitivity. <em>Source:</em> IPCC (AR6), <a href="https://www.ipcc.ch/report/ar6/wg1/downloads/figures/IPCC_AR6_WGI_FAQ_7_3_Figure_1.png">[link]</a></figcaption>
</figure>
</div>
</section>
<section id="timing" class="level2">
<h2 class="anchored" data-anchor-id="timing">timing</h2>
<p>One challenge with <span class="math inline">\(CO_2\)</span> emissions is that there is a time lage between emissions and warming. Then, <span class="math inline">\(CO_2\)</span> tends to stay in the atmosphere for a long time. If we doubled <span class="math inline">\(CO_2\)</span> emissions today, we would not see the full warming effect for another 20-30 years. But, <span class="math inline">\(CO_2\)</span> dissipates very slowly (around 0.25% to 0.50% per year), which means that around 70% of <span class="math inline">\(CO_2\)</span> we emit today will still in the atmosphere in 100 years.</p>
<p>Methane (<span class="math inline">\(CH_4\)</span>) operates differently. Methane has a much shorter lifetime in the atmosphere, but it is a much more potent greenhouse gas than <span class="math inline">\(CO_2\)</span>. This means that reducing methane emissions can have a more immediate impact on warming than reducing <span class="math inline">\(CO_2\)</span> emissions.</p>
</section>
<section id="climate-vs.-weather" class="level2">
<h2 class="anchored" data-anchor-id="climate-vs.-weather">climate vs.&nbsp;weather</h2>
<p>Climate is the long-run joint distribution of weather. Think of a bell curve or normal distribution. Typically, summers in Atlanta are hot and humid. That’s climate. Weather is a draw from that distribution (e.g., it’s raining today). Climate change can be represented by a shift or “flattening” of the distribution of weather, or both.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://nap.nationalacademies.org/openbook/21852/xhtml/images/img-40.jpg" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Climate change and weather. <em>Source:</em> National Academies, 2016, <a href="https://nap.nationalacademies.org/openbook/21852/xhtml/images/img-40.jpg">[Link].</a></figcaption>
</figure>
</div>
</section>
<section id="resources-and-further-reading" class="level2">
<h2 class="anchored" data-anchor-id="resources-and-further-reading">resources and further reading</h2>
<ul>
<li>IPCC, <a href="https://www.ipcc.ch/assessment-report/ar6/">Sixth Assessment Report</a>, 2021.</li>
<li><a href="https://qz.com/817354/scientists-have-been-forecasting-that-burning-fossil-fuels-will-cause-climate-change-as-early-as-1882/">“A 1912 news article ominously forecasted the catastrophic effects of fossil fuels on climate change,”</a> Quartz, Oct.&nbsp;2016.</li>
<li><a href="https://xkcd.com/1732/">A Timeline of Earth’s Average Temperature</a>, XKCD.</li>
</ul>
</section>
<section id="references" class="level2">
<h2 class="anchored" data-anchor-id="references">references</h2>
<div id="refs" class="references csl-bib-body hanging-indent" role="list">
<div id="ref-hsiang2018economist" class="csl-entry" role="listitem">
Hsiang, Solomon, and Robert E. Kopp. 2018. <span>“An Economist’s Guide to Climate Change Science.”</span> <em>Journal of Economic Perspectives</em> 32 (4): 3–32.
</div>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>